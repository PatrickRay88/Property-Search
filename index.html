<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Listings </title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>🤖 AI-Powered Property Search</h1>

    <!-- Setup Notification Banner -->
    <div class="setup-banner" id="setup-banner" style="display: none;">
        <div class="setup-content">
            <span class="setup-icon">🔑</span>
            <div class="setup-text">
                <strong>AI Setup Required</strong>
                <p>To use AI features, add your OpenAI API key to <code>ai-config.js</code>.</p>
                <div class="setup-links">
                   <a href="https://platform.openai.com/api-keys" target="_blank" class="setup-link-btn">🔑 Get API Key</a>
                   <a href="./setup-guide.html" target="_blank" class="setup-link-btn">📖 Setup Guide</a>
                </div>
            </div>
            <button class="setup-dismiss" onclick="dismissSetupBanner()">×</button>
        </div>
    </div>

    <!-- AI Control Panel -->
    <div class="ai-control-panel" id="ai-control-panel">
        <div class="ai-dashboard-header">
            <h2>🎛️ AI Features Dashboard</h2>
            <div class="dashboard-controls">
                <a href="./setup-guide.html" target="_blank" class="setup-guide-btn">📖 Setup Guide</a>
                <button onclick="toggleBanner()" class="toggle-banner-btn">🔑 Show Setup Banner</button>
            </div>
        </div>
        <div class="ai-features-grid">
            <div class="ai-feature-card">
                <div class="feature-header">
                    <span class="feature-icon">🗣️</span>
                    <span class="feature-name">Natural Language Search</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggle-nlp" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <p class="feature-description">Search using plain English queries</p>
                <div class="feature-stats" id="stats-nlp">
                    <span class="usage-count">0 uses today</span>
                    <span class="cost-estimate">~$0.01 per search</span>
                </div>
            </div>

            <div class="ai-feature-card">
                <div class="feature-header">
                    <span class="feature-icon">🎯</span>
                    <span class="feature-name">Smart Recommendations</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggle-recommendations" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <p class="feature-description">AI learns your preferences and suggests properties</p>
                <div class="feature-stats" id="stats-recommendations">
                    <span class="usage-count">0 uses today</span>
                    <span class="cost-estimate">Free</span>
                </div>
            </div>

            <div class="ai-feature-card">
                <div class="feature-header">
                    <span class="feature-icon">📊</span>
                    <span class="feature-name">Market Intelligence</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggle-market">
                        <span class="slider"></span>
                    </label>
                </div>
                <p class="feature-description">Get AI insights about market trends</p>
                <div class="feature-stats" id="stats-market">
                    <span class="usage-count">0 uses today</span>
                    <span class="cost-estimate">~$0.005 per analysis</span>
                </div>
            </div>

            <div class="ai-feature-card">
                <div class="feature-header">
                    <span class="feature-icon">🔍</span>
                    <span class="feature-name">Auto-Search Assistant</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggle-auto">
                        <span class="slider"></span>
                    </label>
                </div>
                <p class="feature-description">Background search with smart notifications</p>
                <div class="feature-stats" id="stats-auto">
                    <span class="usage-count">Disabled</span>
                    <span class="cost-estimate">~$0.02 per day</span>
                </div>
            </div>

            <div class="ai-feature-card">
                <div class="feature-header">
                    <span class="feature-icon">💰</span>
                    <span class="feature-name">Investment Analyzer</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggle-investment">
                        <span class="slider"></span>
                    </label>
                </div>
                <p class="feature-description">ROI analysis and investment insights</p>
                <div class="feature-stats" id="stats-investment">
                    <span class="usage-count">Disabled</span>
                    <span class="cost-estimate">~$0.01 per property</span>
                </div>
            </div>

            <div class="ai-feature-card">
                <div class="feature-header">
                    <span class="feature-icon">🏘️</span>
                    <span class="feature-name">Neighborhood Insights</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggle-neighborhood">
                        <span class="slider"></span>
                    </label>
                </div>
                <p class="feature-description">AI-powered area analysis and scoring</p>
                <div class="feature-stats" id="stats-neighborhood">
                    <span class="usage-count">Disabled</span>
                    <span class="cost-estimate">~$0.015 per area</span>
                </div>
            </div>
        </div>
        
        <div class="ai-usage-summary">
            <div class="usage-stat">
                <span class="stat-label">Monthly Usage:</span>
                <span class="stat-value" id="monthly-cost">$0.00</span>
            </div>
            <div class="usage-stat">
                <span class="stat-label">Budget Limit:</span>
                <span class="stat-value">$25.00</span>
            </div>
            <div class="usage-stat">
                <span class="stat-label">AI Status:</span>
                <span class="stat-value status-indicator" id="ai-status">🟢 Active</span>
            </div>
        </div>
    </div>

    <!-- Enhanced Search Container -->
        <!-- Manual Search Interface (shown when AI is disabled) -->
        <div class="manual-search-section" id="manual-search-section" style="display: none;">
            <h3>🔍 Property Search</h3>
            <p class="search-description">Search for properties by city, state, and filters</p>
            
            <div class="manual-search-form">
                <div class="search-row">
                    <div class="search-field">
                        <label for="manual-city">City</label>
                        <input type="text" id="manual-city" placeholder="e.g., Austin, Miami, Denver" class="manual-input">
                    </div>
                    <div class="search-field">
                        <label for="manual-state">State</label>
                        <input type="text" id="manual-state" placeholder="e.g., TX, FL, CO" class="manual-input" maxlength="2">
                    </div>
                    <button class="manual-search-button" onclick="performManualSearch()">🔍 Search Properties</button>
                </div>
                
                <div class="filters-section">
                    <h4>📋 Filters</h4>
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label for="price-min">Min Price</label>
                            <select id="price-min" class="filter-select">
                                <option value="">Any</option>
                                <option value="100000">$100,000+</option>
                                <option value="200000">$200,000+</option>
                                <option value="300000">$300,000+</option>
                                <option value="400000">$400,000+</option>
                                <option value="500000">$500,000+</option>
                                <option value="750000">$750,000+</option>
                                <option value="1000000">$1,000,000+</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="price-max">Max Price</label>
                            <select id="price-max" class="filter-select">
                                <option value="">Any</option>
                                <option value="200000">$200,000</option>
                                <option value="300000">$300,000</option>
                                <option value="400000">$400,000</option>
                                <option value="500000">$500,000</option>
                                <option value="750000">$750,000</option>
                                <option value="1000000">$1,000,000</option>
                                <option value="2000000">$2,000,000</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="bedrooms-filter">Bedrooms</label>
                            <select id="bedrooms-filter" class="filter-select">
                                <option value="">Any</option>
                                <option value="1">1+</option>
                                <option value="2">2+</option>
                                <option value="3">3+</option>
                                <option value="4">4+</option>
                                <option value="5">5+</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="bathrooms-filter">Bathrooms</label>
                            <select id="bathrooms-filter" class="filter-select">
                                <option value="">Any</option>
                                <option value="1">1+</option>
                                <option value="2">2+</option>
                                <option value="3">3+</option>
                                <option value="4">4+</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="quick-search-presets">
                    <h4>🏠 Popular Searches</h4>
                    <div class="preset-buttons">
                        <button class="preset-btn" onclick="fillManualSearch('Austin', 'TX', '', '400000', '3', '')">Austin Family Homes</button>
                        <button class="preset-btn" onclick="fillManualSearch('Miami', 'FL', '', '500000', '2', '')">Miami Condos</button>
                        <button class="preset-btn" onclick="fillManualSearch('Phoenix', 'AZ', '', '300000', '', '')">Phoenix Affordable</button>
                        <button class="preset-btn" onclick="fillManualSearch('Denver', 'CO', '300000', '', '3', '')">Denver Family</button>
                        <button class="preset-btn" onclick="fillManualSearch('Las Vegas', 'NV', '', '', '4', '')">Vegas Luxury</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI-Powered Search Interface (shown when AI is enabled) -->
        <div class="ai-search-section" id="ai-search-section">
            <h3>🤖 Intelligent Property Search</h3>
            <p class="search-description">Describe your dream home in plain English and let AI find it for you</p>
            <div class="ai-search-input-container">
                <input type="text" id="ai-search-input" 
                       placeholder="Try: 'Find me a 3 bedroom house under $400k in Austin with good schools'" 
                       class="ai-search-input">
                <button class="ai-search-button" onclick="performAISearch()">🤖 AI Search</button>
            </div>
            <div class="search-suggestions" id="search-suggestions">
                <span class="suggestion-chip" onclick="fillAISearch('3 bedroom house under 500k in Miami')">Miami starter home</span>
                <span class="suggestion-chip" onclick="fillAISearch('Luxury condo with city view in San Francisco')">SF luxury condo</span>
                <span class="suggestion-chip" onclick="fillAISearch('Family home near schools in Austin Texas')">Austin family home</span>
                <span class="suggestion-chip" onclick="fillAISearch('Investment property under 300k in Phoenix')">Phoenix investment</span>
                <span class="suggestion-chip" onclick="fillAISearch('Modern townhouse with garage in Denver')">Denver townhouse</span>
            </div>
            
            <!-- Quick Search Options -->
            <div class="quick-search-options">
                <h4>� Quick Search</h4>
                <div class="quick-options-grid">
                    <button class="quick-option" onclick="fillAISearch('First time buyer home under 350k')">
                        <span class="option-icon">🏠</span>
                        <span class="option-text">First Home</span>
                    </button>
                    <button class="quick-option" onclick="fillAISearch('Luxury home with pool and modern kitchen')">
                        <span class="option-icon">🏖️</span>
                        <span class="option-text">Luxury</span>
                    </button>
                    <button class="quick-option" onclick="fillAISearch('Investment property with high rental potential')">
                        <span class="option-icon">💰</span>
                        <span class="option-text">Investment</span>
                    </button>
                    <button class="quick-option" onclick="fillAISearch('Family home near top rated schools')">
                        <span class="option-icon">👨‍👩‍👧‍👦</span>
                        <span class="option-text">Family</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="button-container">
        <button id="btn-10" class="listings-button" onclick="setListingCount(10)">10 Listings</button>
        <button id="btn-50" class="listings-button" onclick="setListingCount(50)">50 Listings</button>
    </div>

    <!-- AI Insights Panel -->
    <div class="ai-insights-panel" id="ai-insights-panel" style="display: none;">
        <h3>🧠 AI Insights</h3>
        <div id="ai-insights-content"></div>
    </div>

    <!-- Smart Recommendations Section -->
    <div class="recommendations-section" id="recommendations-section" style="display: none;">
        <h3>🎯 Perfect Matches for You</h3>
        <div id="recommended-properties"></div>
    </div>

    <!-- Results Count Display -->
    <div id="results-count" class="results-count-container"></div>

    <div id="listings" class="listings"></div>

    <div id="pagination" class="pagination">
        <button class="pagination-button" onclick="prevPage()">Previous</button>
        <span id="page-number"></span>
        <button class="pagination-button" onclick="nextPage()">Next</button>
    </div>

    <!-- AI Scripts -->
    <script src="config.js"></script>
    <script src="ai-config.js"></script>
    <script src="ai-system.js"></script>
    <script src="script.js"></script>
    <script src="ai-ui.js"></script>
</body>
</html>